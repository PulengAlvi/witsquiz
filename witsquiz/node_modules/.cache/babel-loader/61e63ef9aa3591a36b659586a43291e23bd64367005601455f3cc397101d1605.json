{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Duma/OneDrive - University of Witwatersrand/Documents/GitHub/witsquiz/witsquiz/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Duma/OneDrive - University of Witwatersrand/Documents/GitHub/witsquiz/witsquiz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Duma/OneDrive - University of Witwatersrand/Documents/GitHub/witsquiz/witsquiz/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{auth,googleProvider}from\"../config/firebase\";import{createUserWithEmailAndPassword,signInWithPopup,onAuthStateChanged}from\"firebase/auth\";import{getAuth,sendEmailVerification}from\"firebase/auth\";import{useNavigate}from\"react-router-dom\";import{useState}from\"react\";import validator from'validator';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var SignUp=function SignUp(){var Auth=getAuth();//navigate is gonna be used to move/redirect through our web pages\nvar navigate=useNavigate();//These functions are used to set the values to these variables\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];//function used to validate password(5 min characters, 1 lower and uppercase & 1 symbol)\nvar validate=function validate(value){if(validator.isStrongPassword(value,{minLength:5,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1})){setErrorMessage('Strong Password');}else if(value===\"\"){setErrorMessage('');}else{setErrorMessage('Weak Password');}};//function used to check which user is currently logged in\nonAuthStateChanged(auth,function(currentUser){setUser(currentUser);});//console.log(auth?.currentUser?.email);//view current user logged in\n//function used to create a new user account, and check if inputs are in correct form 1st!!\nvar signUp=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(!isValidEmail(email)&&password!==\"\")){_context.next=4;break;}alert(\"Please enter a valid email address\");_context.next=15;break;case 4:_context.prev=4;_context.next=7;return createUserWithEmailAndPassword(auth,email,password);case 7:console.log(user);sendEmailVerification(Auth.currentUser).then(function(){// Email verification sent!\n});navigate(\"/\");_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](4);console.error(_context.t0.message);case 15:case\"end\":return _context.stop();}},_callee,null,[[4,12]]);}));return function signUp(){return _ref.apply(this,arguments);};}();//Using built in firebase method to create a new user with google account \nvar logInWithGoogle=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return signInWithPopup(auth,googleProvider);case 3:result=_context2.sent;console.log(result);sendEmailVerification(Auth.currentUser).then(function(){// Email verification sent!\n});navigate(\"/\");_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 12:case\"end\":return _context2.stop();}},_callee2,null,[[0,9]]);}));return function logInWithGoogle(){return _ref2.apply(this,arguments);};}();//This function is used to check for a valid email address\nfunction isValidEmail(email){return /\\S+@\\S+\\.\\S+/.test(email);}//signup function returns layout of the html sign up page\nreturn/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Create an Account\"}),/*#__PURE__*/_jsx(\"p\",{children:\" Sign Up by email & password \"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Email\",type:\"email\",required:true,onChange:function onChange(e){setEmail(e.target.value);}})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter Password\",type:\"password\",onChange:function onChange(e){setPassword(e.target.value);validate(e.target.value);}})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'italic',color:'red',fontSize:\"0.675em\"},children:errorMessage})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"first\",onClick:signUp,children:\" SignUp \"})}),/*#__PURE__*/_jsx(\"h2\",{children:\"OR\"}),/*#__PURE__*/_jsx(\"p\",{children:\" Sign Up using your Google account \"}),/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"/google.png\",alt:\"logo\",width:\"90\",height:\"30\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"first\",onClick:logInWithGoogle,children:\"Sign Up by Google\"})]})});};","map":{"version":3,"names":["auth","googleProvider","createUserWithEmailAndPassword","signInWithPopup","onAuthStateChanged","getAuth","sendEmailVerification","useNavigate","useState","validator","jsx","_jsx","jsxs","_jsxs","SignUp","Auth","navigate","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","user","setUser","_useState7","_useState8","errorMessage","setErrorMessage","validate","value","isStrongPassword","minLength","minLowercase","minUppercase","minNumbers","minSymbols","currentUser","signUp","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","isValidEmail","alert","console","log","then","t0","error","message","stop","apply","arguments","logInWithGoogle","_ref2","_callee2","result","_callee2$","_context2","sent","test","children","placeholder","type","required","onChange","e","target","style","fontWeight","color","fontSize","className","onClick","src","alt","width","height"],"sources":["C:/Users/Duma/OneDrive - University of Witwatersrand/Documents/GitHub/witsquiz/witsquiz/src/pages/signup.js"],"sourcesContent":["import {auth, googleProvider} from \"../config/firebase\";\r\nimport {createUserWithEmailAndPassword, signInWithPopup,onAuthStateChanged, } from \"firebase/auth\";\r\nimport { getAuth, sendEmailVerification } from \"firebase/auth\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport {useState} from \"react\";\r\nimport validator from 'validator'\r\n\r\nexport const SignUp = () => {\r\n    const Auth = getAuth();\r\n    //navigate is gonna be used to move/redirect through our web pages\r\n    const navigate = useNavigate();\r\n    //These functions are used to set the values to these variables\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [user, setUser] = useState({});\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n    //function used to validate password(5 min characters, 1 lower and uppercase & 1 symbol)\r\n    const validate = (value) => {\r\n        if (validator.isStrongPassword(value, {\r\n            minLength: 5, minLowercase: 1,\r\n            minUppercase: 1, minNumbers: 1, minSymbols: 1\r\n        })) {setErrorMessage('Strong Password')} \r\n        else if(value === \"\"){\r\n            setErrorMessage('')\r\n        }\r\n        else {\r\n            setErrorMessage('Weak Password')\r\n        }\r\n  }\r\n    //function used to check which user is currently logged in\r\n    onAuthStateChanged(auth, (currentUser) => {\r\n        setUser(currentUser);\r\n    });\r\n\r\n    //console.log(auth?.currentUser?.email);//view current user logged in\r\n\r\n    //function used to create a new user account, and check if inputs are in correct form 1st!!\r\n    const signUp = async () => {\r\n        if(!isValidEmail(email) && password !== \"\"){\r\n            alert(\"Please enter a valid email address\");\r\n        }else{\r\n            try{\r\n                await createUserWithEmailAndPassword(auth,email,password);\r\n                console.log(user);\r\n                sendEmailVerification(Auth.currentUser).then(() => {// Email verification sent!\r\n                });\r\n                navigate(\"/\");\r\n            }\r\n            catch(err){\r\n                console.error(err.message);\r\n            }\r\n        }\r\n    };\r\n\r\n    //Using built in firebase method to create a new user with google account \r\n    const logInWithGoogle = async () => {\r\n        try{\r\n            const result = await signInWithPopup(auth, googleProvider);\r\n            console.log(result);\r\n            sendEmailVerification(Auth.currentUser).then(() => {// Email verification sent!\r\n            });\r\n            navigate(\"/\");\r\n        }\r\n        catch(err){\r\n            console.error(err);\r\n        }\r\n    };\r\n    //This function is used to check for a valid email address\r\n    function isValidEmail(email) {\r\n        return /\\S+@\\S+\\.\\S+/.test(email);\r\n    }\r\n    //signup function returns layout of the html sign up page\r\n    return (\r\n        <div>\r\n            <div>\r\n                <h1>Create an Account</h1>\r\n                <p> Sign Up by email & password </p>\r\n                <p>\r\n                <input \r\n                    placeholder=\"Enter Email\"\r\n                    type = \"email\"\r\n                    required\r\n                    onChange={(e) => {setEmail(e.target.value);}}\r\n        \r\n                />\r\n                </p>\r\n                <p>\r\n                <input \r\n                    placeholder=\"Enter Password\"\r\n                    type=\"password\"\r\n                    onChange={(e) => {setPassword(e.target.value);validate(e.target.value);}}\r\n                />\r\n                </p>\r\n                <p>\r\n                    <span style={{fontWeight: 'italic',color: 'red',fontSize: \"0.675em\"}}>{errorMessage}</span>\r\n                </p>\r\n                <p>\r\n                <button className=\"first\" onClick={signUp}> SignUp </button>\r\n                </p>\r\n                <h2>OR</h2>\r\n                <p> Sign Up using your Google account </p>\r\n                <h2>\r\n                     <img src={\"/google.png\"} alt = \"logo\" width=\"90\" height=\"30\" />\r\n                </h2>\r\n                <button className=\"first\" onClick={logInWithGoogle}>Sign Up by Google</button>\r\n            </div>          \r\n        </div>\r\n        );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}